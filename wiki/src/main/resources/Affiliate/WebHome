<?xml version="1.0" encoding="utf-8"?>

<xwikidoc>
<web>Affiliate</web>
<name>WebHome</name>
<language></language>
<defaultLanguage>en</defaultLanguage>
<translation>0</translation>
<parent></parent>
<creator>XWiki.Admin</creator>
<author>XWiki.Admin</author>
<customClass></customClass>
<contentAuthor>XWiki.Admin</contentAuthor>
<creationDate>1220594958000</creationDate>
<date>1220851998000</date>
<contentUpdateDate>1220851998000</contentUpdateDate>
<version>12.1</version>
<title></title>
<template></template>
<defaultTemplate></defaultTemplate>
<validationScript></validationScript>
<comment>Upload new attachment &lt;a href="/xwiki/bin/downloadrev/Affiliate/WebHome/test.htm?rev=1.2"&gt;test.htm&lt;/a&gt;</comment>
<minorEdit>false</minorEdit>
<attachment>
<filename>test.htm</filename>
<filesize>1001</filesize>
<author>XWiki.Admin</author>
<date>1220851998000</date>
<version>1.2</version>
<comment></comment>
<content>PGh0bWw+DQo8aGVhZD4NCjx0aXRsZT50ZXN0PC90aXRsZT4NCjxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBzcmM9Imh0dHA6Ly9uZXh0LmRldi5jdXJyaWtpLm9yZy94d2lraS9za2lucy9jdXJyaWtpOC9tZDUuanMiPjwvc2NyaXB0Pg0KPC9oZWFkPg0KPGJvZHk+DQo8Zm9ybSBpZD0icmVnaXN0ZXJmb3JtIiBtZXRob2Q9InBvc3QiIGFjdGlvbj0iaHR0cDovL25leHQuZGV2LmN1cnJpa2kub3JnL3h3aWtpL2Jpbi92aWV3L01haW4vUmVnaXN0cmF0aW9uVGVzdCI+DQo8aW5wdXQgdHlwZT0iaGlkZGVuIiBpZD0idmFsaWRrZXkiIG5hbWU9InZhbGlka2V5IiB2YWx1ZT0iIj4NCjxpbnB1dCB0eXBlPSJoaWRkZW4iIGlkPSJhZmZpbGlhdGVfaWQiIG5hbWU9ImFmZmlsaWF0ZV9pZCIgdmFsdWU9InRlc3QxIj4NCjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZW1haWwiIG5hbWU9ImVtYWlsIiB2YWx1ZT0idGVzdDFAdGVzdC5jb20iPg0KPGJyLz4NCjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0ibG9naW5faWQiIG5hbWU9ImxvZ2luX2lkIiB2YWx1ZT0idGVzdDEiPg0KPGJyLz4NCjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZmlyc3RfbmFtZSIgbmFtZT0iZmlyc3RfbmFtZSIgdmFsdWU9IlRlc3RGaXJzdG5hbWUiPg0KPGJyLz4NCjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0ibGFzdF9uYW1lIiBuYW1lPSJsYXN0X25hbWUiIHZhbHVlPSJUZXN0TGFzdG5hbWUiPg0KPGJyLz4NCjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0icGFzc3dvcmQiIG5hbWU9InBhc3N3b3JkIiB2YWx1ZT0idGVzdHB3ZCI+DQo8YnIvPg0KPGlucHV0IHR5cGU9InRleHQiIGlkPSJhZmZpbGlhdGlvbiIgbmFtZT0iYWZmaWxpYXRpb24iIHZhbHVlPSJUZXN0QWZmaWxpYXRpb24iPg0KPGJyLz4NCjxpbnB1dCB0eXBlPSJidXR0b24iIHZhbHVlPSJDbGlrZSBtZSB0byByZWdpc3RlciIgb25jbGljaz0ic2VuZFRvUmVnaXN0ZXIoJ3JlZ2lzdGVyZm9ybScpIj4NCjwvZm9ybT4NCjwvYm9keT4NCjwvaHRtbD4=</content>
</attachment>
<attachment>
<filename>md5.js</filename>
<filesize>9449</filesize>
<author>XWiki.Admin</author>
<date>1220851805000</date>
<version>1.4</version>
<comment></comment>
<content>LyoNCiAqIEEgSmF2YVNjcmlwdCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgUlNBIERhdGEgU2VjdXJpdHksIEluYy4gTUQ1IE1lc3NhZ2UNCiAqIERpZ2VzdCBBbGdvcml0aG0sIGFzIGRlZmluZWQgaW4gUkZDIDEzMjEuDQogKiBWZXJzaW9uIDIuMSBDb3B5cmlnaHQgKEMpIFBhdWwgSm9obnN0b24gMTk5OSAtIDIwMDIuDQogKiBPdGhlciBjb250cmlidXRvcnM6IEdyZWcgSG9sdCwgQW5kcmV3IEtlcGVydCwgWWRuYXIsIExvc3RpbmV0DQogKiBEaXN0cmlidXRlZCB1bmRlciB0aGUgQlNEIExpY2Vuc2UNCiAqIFNlZSBodHRwOi8vcGFqaG9tZS5vcmcudWsvY3J5cHQvbWQ1IGZvciBtb3JlIGluZm8uDQogKi8NCg0KLyoNCiAqIENvbmZpZ3VyYWJsZSB2YXJpYWJsZXMuIFlvdSBtYXkgbmVlZCB0byB0d2VhayB0aGVzZSB0byBiZSBjb21wYXRpYmxlIHdpdGgNCiAqIHRoZSBzZXJ2ZXItc2lkZSwgYnV0IHRoZSBkZWZhdWx0cyB3b3JrIGluIG1vc3QgY2FzZXMuDQogKi8NCnZhciBoZXhjYXNlID0gMDsgIC8qIGhleCBvdXRwdXQgZm9ybWF0LiAwIC0gbG93ZXJjYXNlOyAxIC0gdXBwZXJjYXNlICAgICAgICAqLw0KdmFyIGI2NHBhZCAgPSAiIjsgLyogYmFzZS02NCBwYWQgY2hhcmFjdGVyLiAiPSIgZm9yIHN0cmljdCBSRkMgY29tcGxpYW5jZSAgICovDQp2YXIgY2hyc3ogICA9IDg7ICAvKiBiaXRzIHBlciBpbnB1dCBjaGFyYWN0ZXIuIDggLSBBU0NJSTsgMTYgLSBVbmljb2RlICAgICAgKi8NCg0KLyoNCiAqIFRoZXNlIGFyZSB0aGUgZnVuY3Rpb25zIHlvdSdsbCB1c3VhbGx5IHdhbnQgdG8gY2FsbA0KICogVGhleSB0YWtlIHN0cmluZyBhcmd1bWVudHMgYW5kIHJldHVybiBlaXRoZXIgaGV4IG9yIGJhc2UtNjQgZW5jb2RlZCBzdHJpbmdzDQogKi8NCmZ1bmN0aW9uIGhleF9tZDUocyl7IHJldHVybiBiaW5sMmhleChjb3JlX21kNShzdHIyYmlubChzKSwgcy5sZW5ndGggKiBjaHJzeikpO30NCmZ1bmN0aW9uIGI2NF9tZDUocyl7IHJldHVybiBiaW5sMmI2NChjb3JlX21kNShzdHIyYmlubChzKSwgcy5sZW5ndGggKiBjaHJzeikpO30NCmZ1bmN0aW9uIHN0cl9tZDUocyl7IHJldHVybiBiaW5sMnN0cihjb3JlX21kNShzdHIyYmlubChzKSwgcy5sZW5ndGggKiBjaHJzeikpO30NCmZ1bmN0aW9uIGhleF9obWFjX21kNShrZXksIGRhdGEpIHsgcmV0dXJuIGJpbmwyaGV4KGNvcmVfaG1hY19tZDUoa2V5LCBkYXRhKSk7IH0NCmZ1bmN0aW9uIGI2NF9obWFjX21kNShrZXksIGRhdGEpIHsgcmV0dXJuIGJpbmwyYjY0KGNvcmVfaG1hY19tZDUoa2V5LCBkYXRhKSk7IH0NCmZ1bmN0aW9uIHN0cl9obWFjX21kNShrZXksIGRhdGEpIHsgcmV0dXJuIGJpbmwyc3RyKGNvcmVfaG1hY19tZDUoa2V5LCBkYXRhKSk7IH0NCg0KLyoNCiAqIFBlcmZvcm0gYSBzaW1wbGUgc2VsZi10ZXN0IHRvIHNlZSBpZiB0aGUgVk0gaXMgd29ya2luZw0KICovDQpmdW5jdGlvbiBtZDVfdm1fdGVzdCgpDQp7DQogIHJldHVybiBoZXhfbWQ1KCJhYmMiKSA9PSAiOTAwMTUwOTgzY2QyNGZiMGQ2OTYzZjdkMjhlMTdmNzIiOw0KfQ0KDQovKg0KICogQ2FsY3VsYXRlIHRoZSBNRDUgb2YgYW4gYXJyYXkgb2YgbGl0dGxlLWVuZGlhbiB3b3JkcywgYW5kIGEgYml0IGxlbmd0aA0KICovDQpmdW5jdGlvbiBjb3JlX21kNSh4LCBsZW4pDQp7DQogIC8qIGFwcGVuZCBwYWRkaW5nICovDQogIHhbbGVuID4+IDVdIHw9IDB4ODAgPDwgKChsZW4pICUgMzIpOw0KICB4WygoKGxlbiArIDY0KSA+Pj4gOSkgPDwgNCkgKyAxNF0gPSBsZW47DQoNCiAgdmFyIGEgPSAgMTczMjU4NDE5MzsNCiAgdmFyIGIgPSAtMjcxNzMzODc5Ow0KICB2YXIgYyA9IC0xNzMyNTg0MTk0Ow0KICB2YXIgZCA9ICAyNzE3MzM4Nzg7DQoNCiAgZm9yKHZhciBpID0gMDsgaSA8IHgubGVuZ3RoOyBpICs9IDE2KQ0KICB7DQogICAgdmFyIG9sZGEgPSBhOw0KICAgIHZhciBvbGRiID0gYjsNCiAgICB2YXIgb2xkYyA9IGM7DQogICAgdmFyIG9sZGQgPSBkOw0KDQogICAgYSA9IG1kNV9mZihhLCBiLCBjLCBkLCB4W2krIDBdLCA3ICwgLTY4MDg3NjkzNik7DQogICAgZCA9IG1kNV9mZihkLCBhLCBiLCBjLCB4W2krIDFdLCAxMiwgLTM4OTU2NDU4Nik7DQogICAgYyA9IG1kNV9mZihjLCBkLCBhLCBiLCB4W2krIDJdLCAxNywgIDYwNjEwNTgxOSk7DQogICAgYiA9IG1kNV9mZihiLCBjLCBkLCBhLCB4W2krIDNdLCAyMiwgLTEwNDQ1MjUzMzApOw0KICAgIGEgPSBtZDVfZmYoYSwgYiwgYywgZCwgeFtpKyA0XSwgNyAsIC0xNzY0MTg4OTcpOw0KICAgIGQgPSBtZDVfZmYoZCwgYSwgYiwgYywgeFtpKyA1XSwgMTIsICAxMjAwMDgwNDI2KTsNCiAgICBjID0gbWQ1X2ZmKGMsIGQsIGEsIGIsIHhbaSsgNl0sIDE3LCAtMTQ3MzIzMTM0MSk7DQogICAgYiA9IG1kNV9mZihiLCBjLCBkLCBhLCB4W2krIDddLCAyMiwgLTQ1NzA1OTgzKTsNCiAgICBhID0gbWQ1X2ZmKGEsIGIsIGMsIGQsIHhbaSsgOF0sIDcgLCAgMTc3MDAzNTQxNik7DQogICAgZCA9IG1kNV9mZihkLCBhLCBiLCBjLCB4W2krIDldLCAxMiwgLTE5NTg0MTQ0MTcpOw0KICAgIGMgPSBtZDVfZmYoYywgZCwgYSwgYiwgeFtpKzEwXSwgMTcsIC00MjA2Myk7DQogICAgYiA9IG1kNV9mZihiLCBjLCBkLCBhLCB4W2krMTFdLCAyMiwgLTE5OTA0MDQxNjIpOw0KICAgIGEgPSBtZDVfZmYoYSwgYiwgYywgZCwgeFtpKzEyXSwgNyAsICAxODA0NjAzNjgyKTsNCiAgICBkID0gbWQ1X2ZmKGQsIGEsIGIsIGMsIHhbaSsxM10sIDEyLCAtNDAzNDExMDEpOw0KICAgIGMgPSBtZDVfZmYoYywgZCwgYSwgYiwgeFtpKzE0XSwgMTcsIC0xNTAyMDAyMjkwKTsNCiAgICBiID0gbWQ1X2ZmKGIsIGMsIGQsIGEsIHhbaSsxNV0sIDIyLCAgMTIzNjUzNTMyOSk7DQoNCiAgICBhID0gbWQ1X2dnKGEsIGIsIGMsIGQsIHhbaSsgMV0sIDUgLCAtMTY1Nzk2NTEwKTsNCiAgICBkID0gbWQ1X2dnKGQsIGEsIGIsIGMsIHhbaSsgNl0sIDkgLCAtMTA2OTUwMTYzMik7DQogICAgYyA9IG1kNV9nZyhjLCBkLCBhLCBiLCB4W2krMTFdLCAxNCwgIDY0MzcxNzcxMyk7DQogICAgYiA9IG1kNV9nZyhiLCBjLCBkLCBhLCB4W2krIDBdLCAyMCwgLTM3Mzg5NzMwMik7DQogICAgYSA9IG1kNV9nZyhhLCBiLCBjLCBkLCB4W2krIDVdLCA1ICwgLTcwMTU1ODY5MSk7DQogICAgZCA9IG1kNV9nZyhkLCBhLCBiLCBjLCB4W2krMTBdLCA5ICwgIDM4MDE2MDgzKTsNCiAgICBjID0gbWQ1X2dnKGMsIGQsIGEsIGIsIHhbaSsxNV0sIDE0LCAtNjYwNDc4MzM1KTsNCiAgICBiID0gbWQ1X2dnKGIsIGMsIGQsIGEsIHhbaSsgNF0sIDIwLCAtNDA1NTM3ODQ4KTsNCiAgICBhID0gbWQ1X2dnKGEsIGIsIGMsIGQsIHhbaSsgOV0sIDUgLCAgNTY4NDQ2NDM4KTsNCiAgICBkID0gbWQ1X2dnKGQsIGEsIGIsIGMsIHhbaSsxNF0sIDkgLCAtMTAxOTgwMzY5MCk7DQogICAgYyA9IG1kNV9nZyhjLCBkLCBhLCBiLCB4W2krIDNdLCAxNCwgLTE4NzM2Mzk2MSk7DQogICAgYiA9IG1kNV9nZyhiLCBjLCBkLCBhLCB4W2krIDhdLCAyMCwgIDExNjM1MzE1MDEpOw0KICAgIGEgPSBtZDVfZ2coYSwgYiwgYywgZCwgeFtpKzEzXSwgNSAsIC0xNDQ0NjgxNDY3KTsNCiAgICBkID0gbWQ1X2dnKGQsIGEsIGIsIGMsIHhbaSsgMl0sIDkgLCAtNTE0MDM3ODQpOw0KICAgIGMgPSBtZDVfZ2coYywgZCwgYSwgYiwgeFtpKyA3XSwgMTQsICAxNzM1MzI4NDczKTsNCiAgICBiID0gbWQ1X2dnKGIsIGMsIGQsIGEsIHhbaSsxMl0sIDIwLCAtMTkyNjYwNzczNCk7DQoNCiAgICBhID0gbWQ1X2hoKGEsIGIsIGMsIGQsIHhbaSsgNV0sIDQgLCAtMzc4NTU4KTsNCiAgICBkID0gbWQ1X2hoKGQsIGEsIGIsIGMsIHhbaSsgOF0sIDExLCAtMjAyMjU3NDQ2Myk7DQogICAgYyA9IG1kNV9oaChjLCBkLCBhLCBiLCB4W2krMTFdLCAxNiwgIDE4MzkwMzA1NjIpOw0KICAgIGIgPSBtZDVfaGgoYiwgYywgZCwgYSwgeFtpKzE0XSwgMjMsIC0zNTMwOTU1Nik7DQogICAgYSA9IG1kNV9oaChhLCBiLCBjLCBkLCB4W2krIDFdLCA0ICwgLTE1MzA5OTIwNjApOw0KICAgIGQgPSBtZDVfaGgoZCwgYSwgYiwgYywgeFtpKyA0XSwgMTEsICAxMjcyODkzMzUzKTsNCiAgICBjID0gbWQ1X2hoKGMsIGQsIGEsIGIsIHhbaSsgN10sIDE2LCAtMTU1NDk3NjMyKTsNCiAgICBiID0gbWQ1X2hoKGIsIGMsIGQsIGEsIHhbaSsxMF0sIDIzLCAtMTA5NDczMDY0MCk7DQogICAgYSA9IG1kNV9oaChhLCBiLCBjLCBkLCB4W2krMTNdLCA0ICwgIDY4MTI3OTE3NCk7DQogICAgZCA9IG1kNV9oaChkLCBhLCBiLCBjLCB4W2krIDBdLCAxMSwgLTM1ODUzNzIyMik7DQogICAgYyA9IG1kNV9oaChjLCBkLCBhLCBiLCB4W2krIDNdLCAxNiwgLTcyMjUyMTk3OSk7DQogICAgYiA9IG1kNV9oaChiLCBjLCBkLCBhLCB4W2krIDZdLCAyMywgIDc2MDI5MTg5KTsNCiAgICBhID0gbWQ1X2hoKGEsIGIsIGMsIGQsIHhbaSsgOV0sIDQgLCAtNjQwMzY0NDg3KTsNCiAgICBkID0gbWQ1X2hoKGQsIGEsIGIsIGMsIHhbaSsxMl0sIDExLCAtNDIxODE1ODM1KTsNCiAgICBjID0gbWQ1X2hoKGMsIGQsIGEsIGIsIHhbaSsxNV0sIDE2LCAgNTMwNzQyNTIwKTsNCiAgICBiID0gbWQ1X2hoKGIsIGMsIGQsIGEsIHhbaSsgMl0sIDIzLCAtOTk1MzM4NjUxKTsNCg0KICAgIGEgPSBtZDVfaWkoYSwgYiwgYywgZCwgeFtpKyAwXSwgNiAsIC0xOTg2MzA4NDQpOw0KICAgIGQgPSBtZDVfaWkoZCwgYSwgYiwgYywgeFtpKyA3XSwgMTAsICAxMTI2ODkxNDE1KTsNCiAgICBjID0gbWQ1X2lpKGMsIGQsIGEsIGIsIHhbaSsxNF0sIDE1LCAtMTQxNjM1NDkwNSk7DQogICAgYiA9IG1kNV9paShiLCBjLCBkLCBhLCB4W2krIDVdLCAyMSwgLTU3NDM0MDU1KTsNCiAgICBhID0gbWQ1X2lpKGEsIGIsIGMsIGQsIHhbaSsxMl0sIDYgLCAgMTcwMDQ4NTU3MSk7DQogICAgZCA9IG1kNV9paShkLCBhLCBiLCBjLCB4W2krIDNdLCAxMCwgLTE4OTQ5ODY2MDYpOw0KICAgIGMgPSBtZDVfaWkoYywgZCwgYSwgYiwgeFtpKzEwXSwgMTUsIC0xMDUxNTIzKTsNCiAgICBiID0gbWQ1X2lpKGIsIGMsIGQsIGEsIHhbaSsgMV0sIDIxLCAtMjA1NDkyMjc5OSk7DQogICAgYSA9IG1kNV9paShhLCBiLCBjLCBkLCB4W2krIDhdLCA2ICwgIDE4NzMzMTMzNTkpOw0KICAgIGQgPSBtZDVfaWkoZCwgYSwgYiwgYywgeFtpKzE1XSwgMTAsIC0zMDYxMTc0NCk7DQogICAgYyA9IG1kNV9paShjLCBkLCBhLCBiLCB4W2krIDZdLCAxNSwgLTE1NjAxOTgzODApOw0KICAgIGIgPSBtZDVfaWkoYiwgYywgZCwgYSwgeFtpKzEzXSwgMjEsICAxMzA5MTUxNjQ5KTsNCiAgICBhID0gbWQ1X2lpKGEsIGIsIGMsIGQsIHhbaSsgNF0sIDYgLCAtMTQ1NTIzMDcwKTsNCiAgICBkID0gbWQ1X2lpKGQsIGEsIGIsIGMsIHhbaSsxMV0sIDEwLCAtMTEyMDIxMDM3OSk7DQogICAgYyA9IG1kNV9paShjLCBkLCBhLCBiLCB4W2krIDJdLCAxNSwgIDcxODc4NzI1OSk7DQogICAgYiA9IG1kNV9paShiLCBjLCBkLCBhLCB4W2krIDldLCAyMSwgLTM0MzQ4NTU1MSk7DQoNCiAgICBhID0gc2FmZV9hZGQoYSwgb2xkYSk7DQogICAgYiA9IHNhZmVfYWRkKGIsIG9sZGIpOw0KICAgIGMgPSBzYWZlX2FkZChjLCBvbGRjKTsNCiAgICBkID0gc2FmZV9hZGQoZCwgb2xkZCk7DQogIH0NCiAgcmV0dXJuIEFycmF5KGEsIGIsIGMsIGQpOw0KDQp9DQoNCi8qDQogKiBUaGVzZSBmdW5jdGlvbnMgaW1wbGVtZW50IHRoZSBmb3VyIGJhc2ljIG9wZXJhdGlvbnMgdGhlIGFsZ29yaXRobSB1c2VzLg0KICovDQpmdW5jdGlvbiBtZDVfY21uKHEsIGEsIGIsIHgsIHMsIHQpDQp7DQogIHJldHVybiBzYWZlX2FkZChiaXRfcm9sKHNhZmVfYWRkKHNhZmVfYWRkKGEsIHEpLCBzYWZlX2FkZCh4LCB0KSksIHMpLGIpOw0KfQ0KZnVuY3Rpb24gbWQ1X2ZmKGEsIGIsIGMsIGQsIHgsIHMsIHQpDQp7DQogIHJldHVybiBtZDVfY21uKChiICYgYykgfCAoKH5iKSAmIGQpLCBhLCBiLCB4LCBzLCB0KTsNCn0NCmZ1bmN0aW9uIG1kNV9nZyhhLCBiLCBjLCBkLCB4LCBzLCB0KQ0Kew0KICByZXR1cm4gbWQ1X2NtbigoYiAmIGQpIHwgKGMgJiAofmQpKSwgYSwgYiwgeCwgcywgdCk7DQp9DQpmdW5jdGlvbiBtZDVfaGgoYSwgYiwgYywgZCwgeCwgcywgdCkNCnsNCiAgcmV0dXJuIG1kNV9jbW4oYiBeIGMgXiBkLCBhLCBiLCB4LCBzLCB0KTsNCn0NCmZ1bmN0aW9uIG1kNV9paShhLCBiLCBjLCBkLCB4LCBzLCB0KQ0Kew0KICByZXR1cm4gbWQ1X2NtbihjIF4gKGIgfCAofmQpKSwgYSwgYiwgeCwgcywgdCk7DQp9DQoNCi8qDQogKiBDYWxjdWxhdGUgdGhlIEhNQUMtTUQ1LCBvZiBhIGtleSBhbmQgc29tZSBkYXRhDQogKi8NCmZ1bmN0aW9uIGNvcmVfaG1hY19tZDUoa2V5LCBkYXRhKQ0Kew0KICB2YXIgYmtleSA9IHN0cjJiaW5sKGtleSk7DQogIGlmKGJrZXkubGVuZ3RoID4gMTYpIGJrZXkgPSBjb3JlX21kNShia2V5LCBrZXkubGVuZ3RoICogY2hyc3opOw0KDQogIHZhciBpcGFkID0gQXJyYXkoMTYpLCBvcGFkID0gQXJyYXkoMTYpOw0KICBmb3IodmFyIGkgPSAwOyBpIDwgMTY7IGkrKykNCiAgew0KICAgIGlwYWRbaV0gPSBia2V5W2ldIF4gMHgzNjM2MzYzNjsNCiAgICBvcGFkW2ldID0gYmtleVtpXSBeIDB4NUM1QzVDNUM7DQogIH0NCg0KICB2YXIgaGFzaCA9IGNvcmVfbWQ1KGlwYWQuY29uY2F0KHN0cjJiaW5sKGRhdGEpKSwgNTEyICsgZGF0YS5sZW5ndGggKiBjaHJzeik7DQogIHJldHVybiBjb3JlX21kNShvcGFkLmNvbmNhdChoYXNoKSwgNTEyICsgMTI4KTsNCn0NCg0KLyoNCiAqIEFkZCBpbnRlZ2Vycywgd3JhcHBpbmcgYXQgMl4zMi4gVGhpcyB1c2VzIDE2LWJpdCBvcGVyYXRpb25zIGludGVybmFsbHkNCiAqIHRvIHdvcmsgYXJvdW5kIGJ1Z3MgaW4gc29tZSBKUyBpbnRlcnByZXRlcnMuDQogKi8NCmZ1bmN0aW9uIHNhZmVfYWRkKHgsIHkpDQp7DQogIHZhciBsc3cgPSAoeCAmIDB4RkZGRikgKyAoeSAmIDB4RkZGRik7DQogIHZhciBtc3cgPSAoeCA+PiAxNikgKyAoeSA+PiAxNikgKyAobHN3ID4+IDE2KTsNCiAgcmV0dXJuIChtc3cgPDwgMTYpIHwgKGxzdyAmIDB4RkZGRik7DQp9DQoNCi8qDQogKiBCaXR3aXNlIHJvdGF0ZSBhIDMyLWJpdCBudW1iZXIgdG8gdGhlIGxlZnQuDQogKi8NCmZ1bmN0aW9uIGJpdF9yb2wobnVtLCBjbnQpDQp7DQogIHJldHVybiAobnVtIDw8IGNudCkgfCAobnVtID4+PiAoMzIgLSBjbnQpKTsNCn0NCg0KLyoNCiAqIENvbnZlcnQgYSBzdHJpbmcgdG8gYW4gYXJyYXkgb2YgbGl0dGxlLWVuZGlhbiB3b3Jkcw0KICogSWYgY2hyc3ogaXMgQVNDSUksIGNoYXJhY3RlcnMgPjI1NSBoYXZlIHRoZWlyIGhpLWJ5dGUgc2lsZW50bHkgaWdub3JlZC4NCiAqLw0KZnVuY3Rpb24gc3RyMmJpbmwoc3RyKQ0Kew0KICB2YXIgYmluID0gQXJyYXkoKTsNCiAgdmFyIG1hc2sgPSAoMSA8PCBjaHJzeikgLSAxOw0KICBmb3IodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aCAqIGNocnN6OyBpICs9IGNocnN6KQ0KICAgIGJpbltpPj41XSB8PSAoc3RyLmNoYXJDb2RlQXQoaSAvIGNocnN6KSAmIG1hc2spIDw8IChpJTMyKTsNCiAgcmV0dXJuIGJpbjsNCn0NCg0KLyoNCiAqIENvbnZlcnQgYW4gYXJyYXkgb2YgbGl0dGxlLWVuZGlhbiB3b3JkcyB0byBhIHN0cmluZw0KICovDQpmdW5jdGlvbiBiaW5sMnN0cihiaW4pDQp7DQogIHZhciBzdHIgPSAiIjsNCiAgdmFyIG1hc2sgPSAoMSA8PCBjaHJzeikgLSAxOw0KICBmb3IodmFyIGkgPSAwOyBpIDwgYmluLmxlbmd0aCAqIDMyOyBpICs9IGNocnN6KQ0KICAgIHN0ciArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChiaW5baT4+NV0gPj4+IChpICUgMzIpKSAmIG1hc2spOw0KICByZXR1cm4gc3RyOw0KfQ0KDQovKg0KICogQ29udmVydCBhbiBhcnJheSBvZiBsaXR0bGUtZW5kaWFuIHdvcmRzIHRvIGEgaGV4IHN0cmluZy4NCiAqLw0KZnVuY3Rpb24gYmlubDJoZXgoYmluYXJyYXkpDQp7DQogIHZhciBoZXhfdGFiID0gaGV4Y2FzZSA/ICIwMTIzNDU2Nzg5QUJDREVGIiA6ICIwMTIzNDU2Nzg5YWJjZGVmIjsNCiAgdmFyIHN0ciA9ICIiOw0KICBmb3IodmFyIGkgPSAwOyBpIDwgYmluYXJyYXkubGVuZ3RoICogNDsgaSsrKQ0KICB7DQogICAgc3RyICs9IGhleF90YWIuY2hhckF0KChiaW5hcnJheVtpPj4yXSA+PiAoKGklNCkqOCs0KSkgJiAweEYpICsNCiAgICAgICAgICAgaGV4X3RhYi5jaGFyQXQoKGJpbmFycmF5W2k+PjJdID4+ICgoaSU0KSo4ICApKSAmIDB4Rik7DQogIH0NCiAgcmV0dXJuIHN0cjsNCn0NCg0KLyoNCiAqIENvbnZlcnQgYW4gYXJyYXkgb2YgbGl0dGxlLWVuZGlhbiB3b3JkcyB0byBhIGJhc2UtNjQgc3RyaW5nDQogKi8NCmZ1bmN0aW9uIGJpbmwyYjY0KGJpbmFycmF5KQ0Kew0KICB2YXIgdGFiID0gIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8iOw0KICB2YXIgc3RyID0gIiI7DQogIGZvcih2YXIgaSA9IDA7IGkgPCBiaW5hcnJheS5sZW5ndGggKiA0OyBpICs9IDMpDQogIHsNCiAgICB2YXIgdHJpcGxldCA9ICgoKGJpbmFycmF5W2kgICA+PiAyXSA+PiA4ICogKCBpICAgJTQpKSAmIDB4RkYpIDw8IDE2KQ0KICAgICAgICAgICAgICAgIHwgKCgoYmluYXJyYXlbaSsxID4+IDJdID4+IDggKiAoKGkrMSklNCkpICYgMHhGRikgPDwgOCApDQogICAgICAgICAgICAgICAgfCAgKChiaW5hcnJheVtpKzIgPj4gMl0gPj4gOCAqICgoaSsyKSU0KSkgJiAweEZGKTsNCiAgICBmb3IodmFyIGogPSAwOyBqIDwgNDsgaisrKQ0KICAgIHsNCiAgICAgIGlmKGkgKiA4ICsgaiAqIDYgPiBiaW5hcnJheS5sZW5ndGggKiAzMikgc3RyICs9IGI2NHBhZDsNCiAgICAgIGVsc2Ugc3RyICs9IHRhYi5jaGFyQXQoKHRyaXBsZXQgPj4gNiooMy1qKSkgJiAweDNGKTsNCiAgICB9DQogIH0NCiAgcmV0dXJuIHN0cjsNCn0NCg0KZnVuY3Rpb24gc2VuZFRvUmVnaXN0ZXIoZm9ybWlkKXsNCiAgICB2YXIgdG9lbmNyeXB0PSIiOw0KICAgIHZhciBlbGVtZW50cz1bImFmZmlsaWF0ZV9pZCIsImVtYWlsIiwibG9naW5faWQiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwicGFzc3dvcmQiLCJhZmZpbGlhdGlvbiJdOw0KICAgIGZvcih2YXIgaT0wO2k8ZWxlbWVudHMubGVuZ3RoO2krKyl7DQogICAgICAgIHZhciB0aGlzZWxlbWVudD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50c1tpXSk7DQogICAgICAgIHRvZW5jcnlwdCs9ZWxlbWVudHNbaV07DQogICAgICAgIGlmKHRoaXNlbGVtZW50JiZ0aGlzZWxlbWVudC52YWx1ZSE9IiIpew0KICAgICAgICAgICAgdG9lbmNyeXB0Kz10aGlzZWxlbWVudC52YWx1ZTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidmFsaWRrZXkiKS52YWx1ZT1iNjRfbWQ1KHRvZW5jcnlwdCk7DQogICAgdmFyIHRoaXNmb3JtPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZvcm1pZCk7DQogICAgdGhpc2Zvcm0uYWN0aW9uPXRoaXNmb3JtLmFjdGlvbi5yZXBsYWNlKC9odHRwOi9naSwiaHR0cHM6Iik7DQogICAgdGhpc2Zvcm0uc3VibWl0KCk7DQp9DQo=</content>
</attachment>
<object>
<class>
<name>XWiki.TagClass</name>
<customClass></customClass>
<customMapping></customMapping>
<defaultViewSheet></defaultViewSheet>
<defaultEditSheet></defaultEditSheet>
<defaultWeb></defaultWeb>
<nameField></nameField>
<validationScript></validationScript>
<tags>
<cache>0</cache>
<displayType>select</displayType>
<multiSelect>1</multiSelect>
<name>tags</name>
<number>1</number>
<prettyName>Tags</prettyName>
<relationalStorage>1</relationalStorage>
<separator> </separator>
<separators> ,|</separators>
<size>30</size>
<unmodifiable>0</unmodifiable>
<values></values>
<classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
</tags>
</class>
<name>Affiliate.WebHome</name>
<number>0</number>
<className>XWiki.TagClass</className>
<property>
<tags/>
</property>
</object>
<content>1.1 This is the Documentation for the Affiliate Partner Registration Page

1.1.1 How to create and manage a new Affiliate Partner

Affiliate.patch is svn patch
test.htm is sample partner page {attach:test.htm}

1.1.1.1 Step 1

Add Affiliate Translation file 'Affiliate.Translations' to 'Internationalization Document Bundles'&lt;br/&gt;
use this url '/xwiki/bin/admin/XWiki/XWikiPreferences', the 'Internationalization Document Bundles' is under chapter 'Advanced' or 'Programming'.

1.1.1.1 Step 2

Create an affiliagte registration page, for example, Main.RegisterNameofAffiliate, then copy the contents below into the page you just created:

{code}#set($div_content="&lt;b&gt;Affiliate Partner Descripion&lt;/b&gt;")
#includeForm("Affiliate.RegistrationTemplate"){code}


Then on your new affiliate page, edit the "div_content=" as you see approrpiate. Such as adding a picture and / or some text. Here is an example:&lt;/ br&gt; &lt;/ br&gt;
&lt;img src="http://www.smartboxdesign.com/images/companies/SmartLogo_100x91.jpg" width="100" height="91" align="left" /&gt;&lt;strong&gt;Smart Box Design&lt;/strong&gt; is proud to be a partner of Curriki, where you can find thousands of resources.
&lt;br/&gt;
{code}#set($div_content="&lt;img src='http://www.smartboxdesign.com/images/companies/SmartLogo_100x91.jpg' width='100' height='91' align='left' /&gt;&lt;strong&gt;Smart Box Design&lt;/strong&gt; is proud to be a partner of Curriki, where you can find thousands of resources."){code}
beware this is a string variable, if you want to use multi-lines or " in string, please use \n and \" instead, like this
{code}#set($div_content="&lt;img src=\"http://www.smartboxdesign.com/images/companies/SmartLogo_100x91.jpg\" width=\"100\" height=\"91\" align=\"left\" /&gt;\n&lt;strong&gt;Smart Box Design&lt;/strong&gt; is proud to be a partner of Curriki, where you can find thousands of resources."){code}

1.1.1.1 Step 3

Go to /xwiki/bin/view/Affiliate/AffiliateManagement *[Affiliate.AffiliateManagement]* to create affiliate partner information. It would be best to use the same name you used to create the affiliate partner page above. 

Joshua created one named test1, its auto-joined group is Group_test, you can modify it to your group's name.
* to support multi-groups, use a comma-separated string, e.g., Group_name1,Group_name2
* on the management page, button "Add" is to create new affiliate partners, button "Modify" is to modify or delete affiliate partners

You will need to provide the information created on the Affiliate Management page to the Partner for Step 4 below.


1.1.1.1 Step 4

Go to /xwiki/bin/edit/Affiliate/WebPreferences?editor=object to modify space Affiliate rights. Affiliate's author need programming rights to run Groovy and invite user into group(s) (I have given all rights to AdminGroup, and all Affiliate pages author is Admin which is AdminGroup's menmeber)
XWikiGuest need view rights to visit registration page.


There is a problem, I remember the spec said the space Affiliate should only be visited by admin, but all registration page is based on Affiliate.RegistrationTemplate, that mean guest should be able to visit Affiliate.RegistrationTemplate.


1.1.1.1 Step 5

This part gets created on the partner pages. See sample page test.htm (Attached) {attach:test.htm}

Here is params description:
'validkey' is a required hidden field, before submit, javavscipt will fill it with md5 sign string
'affiliate_id' is required and will be a hidden field on partner registration page
other parameters are optional, if partner provide these parameters, the value will be auto-filled into partner registration page
and partner should call sendToRegister('registerform') function to submit form, 'registerform' is form id


Partner only need add
{code}&lt;script type="text/javascript" src="http://next.dev.curriki.org/xwiki/skins/curriki8/md5.js"&gt;&lt;/script&gt;
and form like this:
&lt;form id="registerform" method="post" action="http://next.dev.curriki.org/xwiki/bin/view/Main/RegistrationTest"&gt;
&lt;input type="hidden" id="validkey" name="validkey" value=""&gt;
&lt;input type="hidden" id="affiliate_id" name="affiliate_id" value="test1"&gt;
&lt;input type="text" id="email" name="email" value="test1@test.com"&gt;
&lt;br/&gt;
&lt;input type="text" id="login_id" name="login_id" value="test1"&gt;
&lt;br/&gt;
&lt;input type="text" id="first_name" name="first_name" value="TestFirstname"&gt;
&lt;br/&gt;
&lt;input type="text" id="last_name" name="last_name" value="TestLastname"&gt;
&lt;br/&gt;
&lt;input type="text" id="password" name="password" value="testpwd"&gt;
&lt;br/&gt;
&lt;input type="text" id="affiliation" name="affiliation" value="TestAffiliation"&gt;
&lt;br/&gt;
&lt;input type="button" value="Clike me to register" onclick="sendToRegister('registerform')"&gt;
&lt;/form&gt;{code}
#message("The 'next.dev.curriki.org' is curriki test server, if you want to use production environment, you should change it to www.curriki.org")</content>
</xwikidoc>
