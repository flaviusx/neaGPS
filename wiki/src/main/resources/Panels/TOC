<?xml version="1.0" encoding="ISO-8859-1"?>

<xwikidoc>
<web>Panels</web>
<name>TOC</name>
<language></language>
<defaultLanguage>en</defaultLanguage>
<translation>0</translation>
<parent></parent>
<creator>XWiki.ludovic</creator>
<author>XWiki.ludovic</author>
<customClass></customClass>
<contentAuthor>XWiki.ludovic</contentAuthor>
<creationDate>1190208498000</creationDate>
<date>1190213693000</date>
<contentUpdateDate>1190213693000</contentUpdateDate>
<version>1.20</version>
<title></title>
<template></template>
<defaultTemplate></defaultTemplate>
<validationScript></validationScript>
<comment></comment>
<object>
<class>
<name>Panels.PanelClass</name>
<customClass></customClass>
<customMapping></customMapping>
<defaultViewSheet></defaultViewSheet>
<defaultEditSheet></defaultEditSheet>
<defaultWeb></defaultWeb>
<nameField></nameField>
<validationScript></validationScript>
<category>
<cache>0</cache>
<displayType>select</displayType>
<multiSelect>0</multiSelect>
<name>category</name>
<number>5</number>
<prettyName>Category</prettyName>
<relationalStorage>0</relationalStorage>
<separator> </separator>
<separators> ,|</separators>
<size>1</size>
<unmodifiable>0</unmodifiable>
<values>Information|Navigation|Tools|Administration|Other</values>
<classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
</category>
<content>
<editor>Text</editor>
<name>content</name>
<number>4</number>
<prettyName>Content</prettyName>
<rows>25</rows>
<size>60</size>
<unmodifiable>0</unmodifiable>
<classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
</content>
<description>
<editor>Text</editor>
<name>description</name>
<number>3</number>
<prettyName>Description</prettyName>
<rows>5</rows>
<size>40</size>
<unmodifiable>0</unmodifiable>
<classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
</description>
<name>
<name>name</name>
<number>1</number>
<prettyName>Name</prettyName>
<size>40</size>
<unmodifiable>0</unmodifiable>
<classType>com.xpn.xwiki.objects.classes.StringClass</classType>
</name>
<type>
<cache>0</cache>
<displayType>select</displayType>
<multiSelect>0</multiSelect>
<name>type</name>
<number>2</number>
<prettyName>Panel type</prettyName>
<relationalStorage>0</relationalStorage>
<separator> </separator>
<separators> ,|</separators>
<size>1</size>
<unmodifiable>0</unmodifiable>
<values>view|edit</values>
<classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
</type>
</class>
<name>Panels.TOC</name>
<number>0</number>
<className>Panels.PanelClass</className>
<property>
<category>Information</category>
</property>
<property>
<content>#set($assetObj = $doc.getObject("XWiki.AssetClass"))
#if($assetObj)
#set($ok = $doc.use($assetObj))
#panelheader('$msg.get("curriki.toc.title")')
&lt;img src="$xwiki.getSkinFile("curriki-nav-closed.png")" /&gt;
#set($bc = $request.bc)
#set($startDoc = $doc)
#set($subAssets = $doc.getObjects("XWiki.SubAssetClass"))
#if(((!$subAssets)||($subAssets.size()==0))&amp;&amp;$request.bc)
## then we are on a source asset we should look at it in the content of it's parent
#set($bc = "")
#set($parent = "")
#foreach($bcItem in $request.bc.split(";"))
#if($parent!="")
#if($bc!="")
#set($bc = "${bc};")
#end
#set($bc="${bc}${parent}")
#end
#set($parent = $bcItem)
#end
#set($startDoc = $xwiki.getDocument($parent))
#end
#findCurrikiTitle($startDoc)
&lt;div class="curriki_toc"&gt;
&lt;ul&gt;
&lt;li #if($doc.fullName==$startDoc.fullName) class="selected" #end&gt;&lt;a href="$startDoc.getURL("view", "bc=${bc}")"&gt;$currikiTitle&lt;/a&gt;
#set($objs = $startDoc.getObjects("XWiki.SubAssetClass"))
#set($assetList = $xwiki.arrayList)
#foreach($obj in $objs)
#set($ok = $assetList.add(""))
#end
#foreach($obj in $objs)
#set($ok = $startDoc.use($obj))
#set($position = $startDoc.getValue("order"))
#set($assetPage = $startDoc.getValue("assetpage"))
#if($position &gt;= $assetList.size())
#set($ok = $assetList.add($assetPage))
#else
#set($ok = $assetList.set($position.intValue(), $assetPage))
#end
#end
#if($assetList.size()&gt;0)
&lt;ul&gt;
#foreach($assetPage in $assetList)
#set($assetDoc = $xwiki.getDocument($assetPage))
#findCurrikiTitle($assetDoc)
&lt;li #if($doc.fullName==$assetDoc.fullName) class="selected" #end&gt;
&lt;a href="$assetDoc.getURL("view", "bc=${bc};$doc.fullName")"&gt;
$currikiTitle
&lt;/a&gt;
#set($objs2 = $assetDoc.getObjects("XWiki.SubAssetClass"))
#set($assetList2 = $xwiki.arrayList)
#foreach($obj2 in $objs2)
#set($ok = $assetList2.add(""))
#end
#foreach($obj2 in $objs2)
#set($ok = $assetDoc.use($obj2))
#set($position2 = $assetDoc.getValue("order"))
#set($assetPage2 = $assetDoc.getValue("assetpage"))
#if($position2 &gt;= $assetList2.size())
#set($ok = $assetList2.add($assetPage2))
#else
#set($ok = $assetList2.set($position2.intValue(), $assetPage2))
#end
#end
#if($assetList2.size()&gt;0)
&lt;ul&gt;
#foreach($assetPage2 in $assetList2)
#set($assetDoc2 = $xwiki.getDocument($assetPage2))
#findCurrikiTitle($assetDoc2)
&lt;li #if($doc.fullName==$assetDoc2.fullName) class="selected" #end&gt;
&lt;a href="$assetDoc2.getURL("view", "bc=${bc};$startDoc.fullName;$assetDoc.fullName")"&gt;
$currikiTitle
&lt;/a&gt;
&lt;/li&gt;
#end
&lt;/ul&gt;
#end
&lt;/li&gt;
#end
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
#end
&lt;br /&gt;
#panelfooter()
#end</content>
</property>
<property>
<description>Asset Table of Content</description>
</property>
<property>
<name>TOC</name>
</property>
<property>
<type>view</type>
</property>
</object>
<object>
<class>
<name>XWiki.TagClass</name>
<customClass></customClass>
<customMapping></customMapping>
<defaultViewSheet></defaultViewSheet>
<defaultEditSheet></defaultEditSheet>
<defaultWeb></defaultWeb>
<nameField></nameField>
<validationScript></validationScript>
<tags>
<cache>0</cache>
<displayType>select</displayType>
<multiSelect>1</multiSelect>
<name>tags</name>
<number>1</number>
<prettyName>Tags</prettyName>
<relationalStorage>1</relationalStorage>
<separator> </separator>
<separators> ,|</separators>
<size>30</size>
<unmodifiable>0</unmodifiable>
<values></values>
<classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
</tags>
</class>
<name>Panels.TOC</name>
<number>0</number>
<className>XWiki.TagClass</className>
<property>
<tags/>
</property>
</object>
<content>#includeForm("Panels.PanelSheet")</content>
<renderedcontent>&lt;table&gt;
  &lt;tr&gt;
    &lt;td class="label"&gt;&lt;label&gt;Name:&lt;/label&gt;&lt;/td&gt;
    &lt;td&gt;TOC&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="label"&gt;&lt;label&gt;Panel type:&lt;/label&gt;&lt;/td&gt;
    &lt;td&gt;view&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="label"&gt;&lt;label&gt;Category:&lt;/label&gt;&lt;/td&gt;
    &lt;td&gt;Information&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="label"&gt;&lt;label&gt;Description:&lt;/label&gt;&lt;/td&gt;
    &lt;td&gt;Asset Table of Content&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="label"&gt;&lt;label&gt;Content:&lt;/label&gt;&lt;/td&gt;
    &lt;td&gt;
&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;</renderedcontent>
</xwikidoc>