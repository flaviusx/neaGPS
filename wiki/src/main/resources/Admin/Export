<?xml version="1.0" encoding="UTF-8"?>

<xwikidoc>
<web>Admin</web>
<name>Export</name>
<language></language>
<defaultLanguage>en</defaultLanguage>
<translation>0</translation>
<parent></parent>
<creator>XWiki.LudovicDubost</creator>
<author>XWiki.LudovicDubost</author>
<customClass></customClass>
<contentAuthor>XWiki.LudovicDubost</contentAuthor>
<creationDate>1160231869000</creationDate>
<date>1163619602000</date>
<contentUpdateDate>1215461922000</contentUpdateDate>
<version>1.11</version>
<title></title>
<template></template>
<defaultTemplate></defaultTemplate>
<validationScript></validationScript>
<comment></comment>
<minorEdit>false</minorEdit>
<content>1 XML Export of the Wiki
&lt;%
import com.xpn.xwiki.*;
import com.xpn.xwiki.plugin.packaging.*;

def exportdir = "/appserv/cc/projects/gelc/gelc/src/main/xwiki/"
def filter = xwiki.parseGroovyFromPage("Admin.ExportFilter")

if (request.confirm=="1") {
println "Starting export"
println "Delete existing files"
println "Creating package"
pack = new Package()
pack.setWithVersions(false)
pack.addDocumentFilter(filter)
println "Adding documents"
pack.addAllWikiDocuments(context.context)
println "Exporting documents"
try {
 pack.exportToDir(new File(exportdir), context.context)
} catch (Exception e) {
 println "Error exporting"
 println e.getMessage()
}
println "Finished."
} else {
 println "[Confirm export&gt;Export?confirm=1]"
}

%&gt;</content>
</xwikidoc>
