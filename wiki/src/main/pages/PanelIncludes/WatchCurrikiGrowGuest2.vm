$context.setCacheDuration(1200)
## #set($targetURL="/xwiki/bin/view/Registration/DirectLogin")##
## #set($anchorAtts="href='$targetURL' onclick='Curriki.ui.login.displayLoginDialog(&quot;/xwiki/bin/view/Registration/LoginOrRegister?xpage=popup&framed=true&quot;); return false;'")
<div id="watch">
    <h2>$msg.get("panel.watchgrow.title")</h2>
    <table>
        <tbody>
        <tr id="watchCurrikiGrowResources">
            <th><a href="/xwiki/bin/view/Main/Browse">$msg.get("panel.watchgrow.resources")</a></th>
            <td><a href="/xwiki/bin/view/Main/Browse">
                #set($lucene = $xwiki.getPlugin("lucene"))
#if(!$lucene)
                #error("Error loading Lucene search")
            #end
#set($luceneQuery = "(CurrikiCode.AssetClass.fw_items:FW_masterFramework.WebHome) AND NOT name:WebHome AND NOT name:WebPreferences AND NOT name:MyCollections AND NOT name:SpaceIndex AND NOT web:AssetTemp")
#set($wikinames = "xwiki")
#set($langs = "default,en,de")
#set($searchresults = $lucene.getSearchResults($luceneQuery, $wikinames, $langs, $xwiki))
$searchresults.totalHitcount
            </a></td>
        </tr>
        <tr id="watchCurrikiGrowMembers">
            <th><a>$msg.get("panel.watchgrow.members")</a></th>
            <td><a>$xwiki.search("select count(*) from BaseObject obj where obj.className = 'XWiki.XWikiUsers'").get(0)</a></td>
        </tr>
        <tr id="watchCurrikiGrowGroups">
            <th><a href="/xwiki/bin/view/Groups/Browse">$msg.get("panel.watchgrow.groups")</a></th>
            <td><a href="/xwiki/bin/view/Groups/Browse">$xwiki.search("select count(*) from BaseObject obj where obj.className = 'XWiki.CurrikiSpaceClass'").get(0)</a></td>
        </tr>
        </tbody>
    </table>
</div>
